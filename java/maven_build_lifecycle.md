# 介绍maven构建的生命周期

这篇是 https://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html 的译文。

# 构建生命周期的基础知识

构建的生命周期是maven的最核心概念。它的意思就是构建和发布某个特定的artifact(project)的每个阶段是否清晰定义。

对想要构建一个project的开发人员来说，只需要掌握非常少的命令，就可以编译一个maven的项目，pom会保证会生成我们希望的产出结果。

有三个内置的构建周期：default,clean 和site。default周期处理项目的部署。clean周期处理项目的清理。site周期创建项目的站点文档。

## 构建的生命周期由阶段组成

每个生命周期都由一些不同的构建阶段组成。每个构建阶段都是生命周期的一个步骤。

例如，default生命周期由下面的阶段组成：

* validate - 验证项目是否正确，并且所有必要的信息是否有效
* compile - 编译项目的代码
* test - 使用合适的单元测试框架测试源码。这些测试代码并不要求打包或者部署
* package - 获取编译后的代码，并且把它们打成可派发的格式，比如JAR.
* verify - 运行集成测试，以确保项目符合质量标准
* install - 安装包到本地的repository中，以便其他项目可以依赖这个项目。
* deploy - 在构建的结束阶段，把最终包上传到远端的repository中，以便其他的项目和开发者可以使用。

这些构建周期的各个步骤是用来顺序执行，以便完成default的生命周期。（当然其他的生命周期的步骤还没有介绍）。这就意味着，一旦使用了default生命周期，maven会首先验证项目，然后编译代码，跑单元测试，打包二进制文件，运行集成测试，验证集成测试，安装验证后的包到本地仓库，然后部署到远端仓库。

# 使用命令行调用

在开发环境，使用下面的命令构建和安装项目到本地仓库
```
mvn install
```
这个命令执行default生命周期中install阶段及之前的阶段（比如validate，compile，package等）。就是说，你只需要调用最后一个需要你执行的阶段就能执行这个阶段之前的命令了。

在构建环境，使用下面的命令就能清空构建发布在共享仓库中的项目。
```
mvn clean deploy
```
在多模块场景，maven进入到每个子项目并且执行clean，然后执行deploy。
